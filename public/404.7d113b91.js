const e=new URLSearchParams(window.location.search).get("url"),t=document.querySelector("[search-bar]"),n=document.querySelector("[search-input]"),l=document.querySelector("[result]"),s=document.querySelector("[result-list]"),r=e=>/^(http|https):\/\/[^ "]+$/.test(e),o=t=>Object.assign(document.createElement("a"),{href:t,textContent:t.replace(`https://${e}`,""),target:"_blank",rel:"noopener noreferrer",title:"Open link in a new tab",classList:["link-box"]}),i=e=>{let t=o(JSON.parse(e.data).uniqueLink);s.appendChild(t)},a=e=>(r(e)||(e=`https://${e}`),new URL(e).hostname);n.addEventListener("input",()=>{let e=n.value;e&&(n.value=a(e))}),t.style.top=`${-(.6*t.clientHeight)}px`;let c=0;if(window.addEventListener("resize",()=>{t.style.top=`${-t.clientHeight*(100/3*2)}px`}),window.addEventListener("scroll",()=>{let e=l.getBoundingClientRect().top<0,n=window.scrollY<c;if(c=window.scrollY,!e)return t.classList.remove("-show");t.classList.toggle("-show",n)}),e){let t=a(e);n.value=t,(e=>{let t=new EventSource(`/api/pages?site=https://${e}`);t.addEventListener("New Link",i),t.addEventListener("Close Connection",t.close)})(t)}